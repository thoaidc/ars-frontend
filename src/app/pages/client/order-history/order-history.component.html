<div class="container p-t-30 p-b-80">
  <div class="row">
    <div class="col-md-8 m-lr-auto">
      <h3>Lịch sử đơn hàng</h3>
      <div *ngFor="let o of orders" class="order-card p-3 mb-3 bor">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ o.id }}</strong> — <span class="text-muted">{{ o.status }}</span>
            <div *ngFor="let it of o.items">{{ it.name }} x{{ it.qty }} — {{ it.price | vndCurrency }}</div>
          </div>
          <div>
            <div class="text-right">{{ o.total | vndCurrency }}</div>
            <div class="mt-2">
              <button *ngIf="o.status === 'completed'" class="btn btn-sm btn-primary" (click)="openReview(o)">Đánh giá</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal review -->
  <div id="modal-review" class="modal-review" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:2000;">
    <div style="max-width:600px;margin:80px auto;background:#fff;padding:20px;border-radius:6px;">
      <h5>Đánh giá đơn {{ selectedOrder?.id }}</h5>
      <textarea rows="4" class="form-control" id="reviewText"></textarea>
      <div class="mt-3 text-right">
        <button class="btn btn-secondary" (click)="closeReview()">Hủy</button>
        <button class="btn btn-primary" (click)="submitReview()" style="margin-left:8px;">Gửi</button>
      </div>
    </div>
  </div>
</div>

