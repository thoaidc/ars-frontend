<div class="container p-t-30 p-b-80">
  <div class="row">
    <!-- Nếu đã đăng nhập: hiển thị sidebar + nội dung tài khoản -->
    <ng-container *ngIf="authenticated; else guestLayout">
      <div class="col-md-3">
        <!-- Sidebar menu (chỉ 3 mục) -->
        <div class="card p-3 shadow-sm mb-3">
          <ul class="list-unstyled mb-0">
            <li class="mb-2">
              <a routerLink="/client/user" class="text-dark font-weight-bold d-flex align-items-center">
                <i class="fa fa-user me-2" aria-hidden="true"></i>
                <span>Tài khoản của tôi</span>
              </a>
            </li>
            <li class="mb-2">
              <a routerLink="/client/order-history" class="text-dark d-flex align-items-center">
                <i class="fa fa-history me-2" aria-hidden="true"></i>
                <span>Lịch sử đơn hàng</span>
              </a>
            </li>
            <li class="mb-2">
              <a href="#" (click)="logout()" class="text-dark d-flex align-items-center">
                <!-- use 'fas' and fallback 'fa' for broader FA support -->
                <i class="fas fa-sign-out-alt fa-sign-out me-2" aria-hidden="true"></i>
                <span>Đăng xuất</span>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-md-9">
        <h3 class="mb-3">Profile</h3>

        <div class="card p-4 shadow-sm">
          <div class="row">
            <!-- Form thông tin -->
            <div class="col-12">
              <form class="p-2" (ngSubmit)="updateProfile()">
                <div class="form-group row">
                  <label for="fullname" class="col-sm-3 col-form-label">Họ và tên</label>
                  <div class="col-sm-9">
                    <input id="fullname" class="form-control" type="text" [(ngModel)]="user.fullname" name="fullname">
                  </div>
                </div>

                <div class="form-group row">
                  <label class="col-sm-3 col-form-label">Tên đăng nhập</label>
                  <div class="col-sm-9">
                    <input class="form-control" type="email" [value]="user?.name" readonly>
                  </div>
                </div>

                <div class="form-group row">
                  <label class="col-sm-3 col-form-label">Email</label>
                  <div class="col-sm-9">
                    <input class="form-control" type="email" [value]="user?.email" readonly>
                  </div>
                </div>

                <div class="form-group row mt-3">
                  <div class="col-sm-3"></div>
                  <div class="col-sm-9">
                    <button type="submit" class="btn btn-primary px-4">Cập nhật</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #guestLayout>
      <div class="col-12">
        <div class="card p-4 shadow-sm text-center">
          <h5>Bạn chưa đăng nhập</h5>
          <p class="text-muted">Vui lòng đăng nhập để xem thông tin tài khoản và lịch sử đơn hàng.</p>
          <div>
            <button (click)="goToLogin()" class="btn btn-primary mr-2">Đăng nhập</button>
            <a routerLink="/register" class="btn btn-outline-secondary">Đăng ký</a>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
